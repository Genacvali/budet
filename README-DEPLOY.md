# Budget PWA - Ð”ÐµÐ¿Ð»Ð¾Ð¹ Ð½Ð° CentOS 9

## Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

### 1. ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð²Ð°ÑˆÐµÐ³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°
export SERVER_USER="root"
export SERVER_HOST="your-server-ip"
```

### 2. ÐŸÐµÑ€Ð²Ð¾Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð´ÐµÐ¿Ð»Ð¾Ð¹

```bash
# Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ TailwindCSS Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ (ÑƒÐ¶Ðµ ÑÐ´ÐµÐ»Ð°Ð½Ð¾)
cd frontend
npm install
cd ..

# Ð”ÐµÐ¿Ð»Ð¾Ð¹ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€
chmod +x deploy-to-server.sh
./deploy-to-server.sh
```

### 3. ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ

```bash
# Ð‘Ñ‹ÑÑ‚Ñ€Ð¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð°
chmod +x update-server.sh
./update-server.sh
```

## Ð§Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð¸ÑÑ…Ð¾Ð´Ð¸Ñ‚ Ð¿Ñ€Ð¸ Ð´ÐµÐ¿Ð»Ð¾Ðµ

### Ð¤Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´ (PWA)
- âœ… **TailwindCSS Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½** - Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð±ÐµÐ· CDN
- âœ… **Service Worker Ð±ÐµÐ· Ð²Ð½ÐµÑˆÐ½Ð¸Ñ… Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹** - Ð½Ð¸ÐºÐ°ÐºÐ¸Ñ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ðº Google CDN
- âœ… **Static adapter** - Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ ÑÑ‚Ð°Ñ‚Ð¸Ñ‡Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð´Ð»Ñ nginx
- âœ… **PWA Ð¼Ð°Ð½Ð¸Ñ„ÐµÑÑ‚** - Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ ÑƒÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ÑÑ ÐºÐ°Ðº Ð½Ð°Ñ‚Ð¸Ð²Ð½Ð¾Ðµ

### Ð‘ÑÐºÐµÐ½Ð´ (Python FastAPI)
- ðŸ **FastAPI Ñ uvicorn** - Ð±Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ASGI ÑÐµÑ€Ð²ÐµÑ€
- ðŸ”’ **Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ñ‹Ð¹ systemd service** - Ð¸Ð·Ð¾Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ
- ðŸ“ **SQLite Ð±Ð°Ð·Ð°** - Ð² `/opt/budget-pwa/backend/data/`
- ðŸ”„ **Auto-restart** - Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº Ð¿Ñ€Ð¸ Ð¿Ð°Ð´ÐµÐ½Ð¸Ð¸

### Nginx
- ðŸŒ **ÐŸÑ€Ð¾ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ API** - `/api/*` â†’ FastAPI
- ðŸ“¦ **Ð¡Ñ‚Ð°Ñ‚Ð¸ÐºÐ° Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð°** - Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ðµ ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
- ðŸš€ **Gzip ÑÐ¶Ð°Ñ‚Ð¸Ðµ** - Ð±Ñ‹ÑÑ‚Ñ€Ð°Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°
- ðŸ”’ **Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ** - ÑÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð²ÐµÑ€ÑÐ¸Ð¹, Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ° ÑÐ»ÑƒÐ¶ÐµÐ±Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²

## Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ

```
/opt/budget-pwa/
â”œâ”€â”€ frontend/           # Ð¡Ð¾Ð±Ñ€Ð°Ð½Ð½Ñ‹Ð¹ Svelte + TailwindCSS
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ service-worker.js
â”‚   â”œâ”€â”€ manifest.webmanifest
â”‚   â””â”€â”€ _app/
â”œâ”€â”€ backend/            # Python FastAPI
â”‚   â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ venv/
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ data/           # SQLite Ð±Ð°Ð·Ð°
â””â”€â”€ logs/
```

## ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ

```bash
# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
sudo systemctl status budget-api nginx

# Ð›Ð¾Ð³Ð¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
sudo journalctl -u budget-api -f
sudo tail -f /var/log/nginx/budget_*.log

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº
sudo systemctl restart budget-api
sudo systemctl reload nginx

# ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ backend
cd /opt/budget-pwa/backend
source venv/bin/activate
pip install -r requirements.txt
sudo systemctl restart budget-api
```

## Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ Ð¸ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ

### âœ… ÐžÑ„Ð»Ð°Ð¹Ð½-Ð¿ÐµÑ€Ð²Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ:
- Service Worker ÐºÑÑˆÐ¸Ñ€ÑƒÐµÑ‚ Ð²ÑÑ‘ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾
- ÐÐ¸ÐºÐ°ÐºÐ¸Ñ… Ð²Ð½ÐµÑˆÐ½Ð¸Ñ… CDN Ð¸Ð»Ð¸ API
- Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð±ÐµÐ· Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚Ð° Ð¿Ð¾ÑÐ»Ðµ Ð¿ÐµÑ€Ð²Ð¾Ð¹ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸

### âœ… Ð—Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ DDoS:
- Ð’ÑÐµ ÑÑ‚Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ñ€ÐµÑÑƒÑ€ÑÑ‹ ÐºÑÑˆÐ¸Ñ€ÑƒÑŽÑ‚ÑÑ nginx
- API Ð¿Ñ€Ð¾ÐºÑÐ¸Ñ€ÑƒÐµÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· nginx Ñ Ð»Ð¸Ð¼Ð¸Ñ‚Ð°Ð¼Ð¸
- FastAPI Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾ (127.0.0.1)

### âœ… Ð‘Ñ‹ÑÑ‚Ñ€Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ:
- Gzip ÑÐ¶Ð°Ñ‚Ð¸Ðµ
- Ð”Ð¾Ð»Ð³Ð¾Ðµ ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑ‚Ð°Ñ‚Ð¸ÐºÐ¸
- Service Worker Ð´Ð»Ñ Ð¼Ð³Ð½Ð¾Ð²ÐµÐ½Ð½Ð¾Ð¹ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸

## Ð£ÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð½ÐµÐ¿Ð¾Ð»Ð°Ð´Ð¾Ðº

### TailwindCSS Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‡Ñ‚Ð¾ PostCSS Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚
cd frontend
npm run build
# Ð”Ð¾Ð»Ð¶Ð½Ñ‹ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑŒÑÑ .tailwind ÐºÐ»Ð°ÑÑÑ‹ Ð² build/_app/
```

### Service Worker Ð¾ÑˆÐ¸Ð±ÐºÐ¸
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð² DevTools â†’ Application â†’ Service Workers
# ÐÐµ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ðº storage.googleapis.com
```

### API Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½
```bash
# ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ:
sudo systemctl status budget-api
sudo journalctl -u budget-api --no-pager
```

## ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³

ÐŸÐ¾ÑÐ»Ðµ Ð´ÐµÐ¿Ð»Ð¾Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ:
- `http://Ð²Ð°Ñˆ-ÑÐµÑ€Ð²ÐµÑ€` - PWA Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ÑÑ
- `http://Ð²Ð°Ñˆ-ÑÐµÑ€Ð²ÐµÑ€/api/health` - API Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚  
- DevTools â†’ Lighthouse â†’ PWA score > 90
- DevTools â†’ Network â†’ Offline mode - Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚